@model Green_Cycle.Models.ViewModels.Account.ManageProfileViewModel
@{
    ViewBag.Title = "Manage Profile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="mb-3">
    <nav style="--bs-breadcrumb-divider: '/';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("Index","Home")">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Manage Profile</li>
        </ol>
    </nav>
</div>

<h2 class="fw-bold mb-4">Manage Profile</h2>

@if (TempData["StatusMessage"] != null)
{
    <div class="alert alert-success d-flex align-items-center" role="alert">
        <span class="me-2">✔</span>
        <div>@TempData["StatusMessage"]</div>
    </div>
}

<div class="card shadow-sm rounded-4">
    <div class="card-body">
        @using (Html.BeginForm("Manage", "Account", FormMethod.Post, new { @class = "needs-validation", novalidate = "novalidate" }))
        {
            @Html.AntiForgeryToken()
            <div class="mb-3">
                <label class="form-label">Name</label>
                @Html.TextBoxFor(m => m.FullName, new { @class = "form-control", placeholder = "Jane Doe" })
            </div>

            <div class="mb-3">
                <label class="form-label">Email</label>
                <div class="input-group">
                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control", disabled = "disabled" })
                    @if (Model.EmailConfirmed)
                    {
                        <span class="input-group-text text-success">✔ Verified</span>
                    }
                    else
                    {
                        <span class="input-group-text text-danger">Unverified</span>
                    }
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Joined</label>
                <input class="form-control" value="@Model.JoinedOn.ToString("MMMM d, yyyy")" disabled />
            </div>

            <div class="d-flex align-items-center gap-3 mb-4">
                <a class="btn btn-outline-secondary" href="@Url.Action("ChangePassword","Account")">Change password</a>

                <div class="form-check form-switch">
                    @Html.CheckBoxFor(m => m.TwoFactorEnabled, new { @class = "form-check-input", role = "switch", id = "enable2fa" })
                    <label class="form-check-label" for="enable2fa">Enable 2FA</label>
                </div>

                <a class="ms-auto text-decoration-none" href="@Url.Action("DownloadData","Account")">Download data</a>
            </div>

            <div class="text-end">
                <button type="submit" class="btn btn-success px-4">Save changes</button>
            </div>
        }
    </div>
</div>
