@model Green_Cycle.Models.ViewModels.Events.ChallengeListViewModel
@{
    ViewBag.Title = "Challenges";
    var tab = (string)ViewBag.Tab ?? "current";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
<style>
    .gc-badge {
        font-weight: 600;
    }

    .gc-card {
        border-radius: 14px;
    }

    .gc-subtle {
        background: #f3f7f3;
        color: #1f7a33;
    }
</style>

<div class="container my-4">
    <h3 class="mb-3">Challenges</h3>

    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link @(tab=="current"?"active":"")" href="@Url.Action("Index", new { tab = "current" })">Current</a>
        </li>
        <li class="nav-item">
            <a class="nav-link @(tab=="upcoming"?"active":"")" href="@Url.Action("Index", new { tab = "upcoming" })">Upcoming</a>
        </li>
        <li class="nav-item">
            <a class="nav-link @(tab=="past"?"active":"")" href="@Url.Action("Index", new { tab = "past" })">Past</a>
        </li>
    </ul>

    @if (TempData["toast"] != null)
    {
        <div class="alert alert-success mt-3" role="alert">
            @TempData["toast"] <span aria-hidden="true">🎉</span>
        </div>
    }

    <div class="mt-3">
        @if (tab == "current")
        {@Html.Partial("_ChallengeList", Model.Current)}
        @if (tab == "upcoming")
        {@Html.Partial("_ChallengeList", Model.Upcoming)}
        @if (tab == "past")
        {@Html.Partial("_ChallengeList", Model.Past)}
    </div>
</div>
